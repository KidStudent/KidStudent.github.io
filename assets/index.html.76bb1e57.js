import{_ as n,a as s,b as a,c as t,d as p,e}from"./zaozhuang-init-4.b3180c3f.js";import{_ as o,o as i,c as l,e as c}from"./app.e1e31e76.js";const u={},r=c('<h1 id="瓦片地址更改" tabindex="-1"><a class="header-anchor" href="#瓦片地址更改" aria-hidden="true">#</a> 瓦片地址更改</h1><p>接入其他厂商的瓦片地址</p><p>由于我们地图图层不是最新或不够详细需要换成其他第三方地图厂商提供的瓦片地址，举个 🌰</p><p>需要换成的地址为 <code>http://56.65.8.70:7783/arctiler/rest/services/mapserver/gaode-road/{z}/{x}/{y}</code></p><p>由于我们地图的正常请求 <code>图片类型</code> 切片地址为 <code>http://192.168.1.120:7777/netposa/NPGIS/services/china/MapServer/getGaodeVectorTile?&amp;L=7&amp;Z=7&amp;Y=52&amp;X=100&amp;imgCache=false</code></p><p>和第三方的区别为 <code>地址不同</code>、<code>请求参数不同</code> 所以要修改 <code>请求地址</code> 以及 <code>发送的参数</code></p><h2 id="更改-mapconfig-json" tabindex="-1"><a class="header-anchor" href="#更改-mapconfig-json" aria-hidden="true">#</a> 更改 mapConfig.json</h2><p>服务器上 <code>html/json/mapConfig.json</code> 文件中更改配置项</p><p><img src="'+n+`" alt="map-config"></p><h3 id="原始json" tabindex="-1"><a class="header-anchor" href="#原始json" aria-hidden="true">#</a> 原始json</h3><details class="custom-container details"><summary>点击查看</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;mapOpts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;minZoom&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token property">&quot;defaultZoom&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token property">&quot;maxZoom&quot;</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
    <span class="token property">&quot;centerPoint&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1.1713879905785e7</span><span class="token punctuation">,</span> <span class="token number">4339220.81197592</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;restrictedExtent&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token number">5513366.366431</span><span class="token punctuation">,</span> <span class="token number">396293.14491343</span><span class="token punctuation">,</span> <span class="token number">1.7914393445139e7</span><span class="token punctuation">,</span> <span class="token number">8282148.4790384</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;projection&quot;</span><span class="token operator">:</span> <span class="token string">&quot;EPSG:900913&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;vectorLayer&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;layerName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;chinaGaodeVectorDemo&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;layerType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NPMapLib.Layers.GaoDeLayer&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;layerOpt&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">&quot;/netposa/NPGIS/services/chinaGaodeVectorDemo/MapServer/getGaodeVectorTile&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">&quot;isBaseLayer&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;layerName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;chinaGaodeVectorDemoLabel&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;layerType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NPMapLib.Layers.GaoDeLayer&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;layerOpt&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;labelUrl&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">&quot;/netposa/NPGIS/services/chinaGaodeVectorDemo/MapServer/getGaodeVectorTileLabel&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">&quot;isBaseLayer&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">&quot;isVectorTile&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">&quot;isVectorLayer&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;layerInfo&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;centerPoint&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1.1713879905785e7</span><span class="token punctuation">,</span> <span class="token number">4339220.81197592</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token property">&quot;defaultZoom&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
          <span class="token property">&quot;fullExtent&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token number">-2.003750834e7</span><span class="token punctuation">,</span> <span class="token number">-2.003750834e7</span><span class="token punctuation">,</span> <span class="token number">2.003750834e7</span><span class="token punctuation">,</span> <span class="token number">2.003750834e7</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token property">&quot;layerType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;gaodeVector&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;maxZoom&quot;</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
          <span class="token property">&quot;minZoom&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
          <span class="token property">&quot;projection&quot;</span><span class="token operator">:</span> <span class="token string">&quot;900913&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;restrictedExtent&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token number">5513366.366431</span><span class="token punctuation">,</span> <span class="token number">396293.14491343</span><span class="token punctuation">,</span> <span class="token number">1.7914393445139e7</span><span class="token punctuation">,</span> <span class="token number">8282148.4790384</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;zoomLevelSequence&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sattilateLayer&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h3 id="修改之后" tabindex="-1"><a class="header-anchor" href="#修改之后" aria-hidden="true">#</a> 修改之后</h3><details class="custom-container details"><summary>点击查看</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>
<span class="token punctuation">{</span>
  <span class="token property">&quot;mapOpts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;minZoom&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token property">&quot;defaultZoom&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token property">&quot;maxZoom&quot;</span><span class="token operator">:</span> <span class="token number">17</span><span class="token punctuation">,</span>
    <span class="token property">&quot;centerPoint&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">117.135354</span><span class="token punctuation">,</span> <span class="token number">36.192084</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;restrictedExtent&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token number">5513366.366431</span><span class="token punctuation">,</span> <span class="token number">396293.14491343</span><span class="token punctuation">,</span> <span class="token number">1.7914393445139e7</span><span class="token punctuation">,</span> <span class="token number">8282148.4790384</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;projection&quot;</span><span class="token operator">:</span> <span class="token string">&quot;EPSG:900913&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;vectorLayer&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;layerName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;china&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;layerType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NPMapLib.Layers.NPLayer&quot;</span><span class="token punctuation">,</span> <span class="token comment">// *普通图层</span>
      <span class="token property">&quot;layerOpt&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://56.65.8.70:7783/arctiler/rest/services/mapserver/gaode-road&quot;</span><span class="token punctuation">,</span> <span class="token comment">// *第三方地图提供的瓦片地址</span>
        <span class="token property">&quot;isBaseLayer&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// *基础图层</span>
        <span class="token property">&quot;isVectorTile&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// *栅格瓦片</span>
        <span class="token property">&quot;isVectorLayer&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;layerInfo&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;centerPoint&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1.1713879905785e7</span><span class="token punctuation">,</span> <span class="token number">4339220.81197592</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token property">&quot;defaultZoom&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
          <span class="token property">&quot;fullExtent&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token number">-2.003750834e7</span><span class="token punctuation">,</span> <span class="token number">-2.003750834e7</span><span class="token punctuation">,</span> <span class="token number">2.003750834e7</span><span class="token punctuation">,</span> <span class="token number">2.003750834e7</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token property">&quot;layerType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;gaode&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;maxZoom&quot;</span><span class="token operator">:</span> <span class="token number">17</span><span class="token punctuation">,</span>
          <span class="token property">&quot;minZoom&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
          <span class="token property">&quot;projection&quot;</span><span class="token operator">:</span> <span class="token string">&quot;900913&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;restrictedExtent&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token number">5513366.366431</span><span class="token punctuation">,</span> <span class="token number">396293.14491343</span><span class="token punctuation">,</span> <span class="token number">1.7914393445139e7</span><span class="token punctuation">,</span> <span class="token number">8282148.4790384</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;png&quot;</span><span class="token punctuation">,</span> <span class="token comment">// *图片类型</span>
          <span class="token property">&quot;zoomLevelSequence&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sattilateLayer&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="init-js" tabindex="-1"><a class="header-anchor" href="#init-js" aria-hidden="true">#</a> Init.js</h2><p>地图 <code>sdk</code> 修改 <code>public/js/npgis/1.0.4.0/Init.js</code></p><p><img src="`+s+'" alt="map-init"></p><h3 id="修改调用地址传入参数" tabindex="-1"><a class="header-anchor" href="#修改调用地址传入参数" aria-hidden="true">#</a> 修改调用地址传入参数</h3><p><code>OpenLayers.Layer.gaode = OpenLayers.Class(OpenLayers.Layer.TMS</code> 搜索此段代码</p><ol><li>第一步 修改拼写参数的 <code>?</code> 为 <code>/</code></li></ol><p><img src="'+a+'" alt="map-init"></p><ol><li>第二步 修改 <code>?&amp;L=7&amp;Z=7&amp;Y=52&amp;X=100&amp;imgCache=false</code> 为 <code>/{z}/{x}/{y}</code></li></ol><p><img src="'+t+'" alt="map-init"></p><ol start="3"><li>第三步 删除请求地址中拼接的 <code>/getTile?</code></li></ol><p><img src="'+p+'" alt="map-init"></p><ol start="4"><li>第四步 删除移动时请求地址拼接的参数</li></ol><p><img src="'+e+'" alt="map-init"></p>',26),d=[r];function k(v,m){return i(),l("div",null,d)}const h=o(u,[["render",k],["__file","index.html.vue"]]);export{h as default};
