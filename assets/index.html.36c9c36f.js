import{_ as t,r as p,o,c as e,a as n,b as c,d as i,e as s}from"./app.cc3919a2.js";const l={},u=s('<h1 id="main-js-配置" tabindex="-1"><a class="header-anchor" href="#main-js-配置" aria-hidden="true">#</a> main.js 配置</h1><p>获取 <code>gptconfig.json</code>，之后根据 <code>autoLoad</code> 字段判断是否直接初始化 <code>gpt</code> 还是挂载 <code>QSGpt</code> 到 <code>window</code> 上</p><p>如果获取 <code>gptconfig.json</code>失败，则直接把 <code>QSGpt</code> 挂载到 <code>window</code> 上</p><p>这里需要我们加载到 <code>document.body</code> 中，所以在 <code>window.onload</code> 后插入</p>',4),d={href:"http://192.168.1.123:10080/platform/qsdi/qihui/xiaozhi/-/blob/master/src/main.js",target:"_blank",rel:"noopener noreferrer"},r=s(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">&#39;element-plus/dist/index.css&#39;</span>
<span class="token keyword">import</span> <span class="token string">&#39;./style/index.scss&#39;</span>
<span class="token keyword">import</span> QSGpt <span class="token keyword">from</span> <span class="token string">&#39;./core&#39;</span>
<span class="token keyword">import</span> useGptConfig <span class="token keyword">from</span> <span class="token string">&#39;@/hooks/useGptConfig&#39;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> gptConfig <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">useGptConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>gptConfig<span class="token punctuation">.</span>autoLoad <span class="token operator">===</span> <span class="token string">&#39;0&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> gpt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QSGpt</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">gptDom</span><span class="token operator">:</span> document<span class="token punctuation">.</span>body<span class="token punctuation">,</span> gptConfig <span class="token punctuation">}</span><span class="token punctuation">)</span>
        gpt<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> gpt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QSGpt</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">gptDom</span><span class="token operator">:</span> document<span class="token punctuation">.</span>body<span class="token punctuation">,</span> gptConfig <span class="token punctuation">}</span><span class="token punctuation">)</span>
        gpt<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span>QSGpt <span class="token operator">=</span> QSGpt
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span>QSGpt <span class="token operator">=</span> QSGpt
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1);function k(v,m){const a=p("ExternalLinkIcon");return o(),e("div",null,[u,n("p",null,[n("a",d,[c("main.js"),i(a)])]),r])}const w=t(l,[["render",k],["__file","index.html.vue"]]);export{w as default};
